# DCFlight Framework - Changelog v0.0.2

**Release Date:** June 21, 2025

## üöÄ Major Improvements

### Modal System Enhancements
- **Fixed modal stacking and child management issues**
  - Modal behavior now matches and exceeds React Native standards
  - Proper child preservation during close animations
  - Smooth modal dismiss animations with correct state management
  - Children remain visible during animation lifecycle

### Component Architecture Cleanup
- **Removed bloated components** to streamline the framework:
  - Removed `DCFSwipeableViewComponent` (iOS) and `swipeable_view_component` (Dart)
  - Removed `DCFAnimatedTextComponent` (iOS) and `animated_text_component` (Dart)
  - Cleaned up component registrations and exports

### New Segmented Control Component
- **Added `DCFSegmentedControlComponent`** with full feature support:
  - Text-based segments with customizable titles
  - **Icon support** via `iconAssets` property for SVG/image assets
  - Mixed content support (fallback from icon to text)
  - Full styling options: `backgroundColor`, `selectedTintColor`, `tintColor`
  - Selection change events with index and title data
  - Proper Flutter asset bundle integration

### Color Management Unification
- **Centralized all color utilities** to use shared `ColorUtilities` from framework layer
- **Removed duplicate `UIColor` extensions** from all primitive components:
  - `DCFToggleComponent`
  - `DCFSegmentedControlComponent` 
  - `DCFCheckboxComponent`
  - `DCFSpinnerComponent`
  - `DCFSliderComponent`
- All components now use `ColorUtilities.color(fromHexString:)` for consistent color handling

### Asset Loading Standardization
- **Verified correct asset loading patterns** across all components
- All components use proper Flutter asset bundle lookup:
  - `sharedFlutterViewController?.lookupKey(forAsset:)`
  - `Bundle.main.path(forResource:)`
- Font loading follows established asset resolution patterns

### Code Organization
- **Consolidated font utilities** into `DCFTextComponent` where they're actually used
- **Removed unnecessary `fonts.swift` files** from primitives and template folders
- Font loading functions moved to `DCFTextComponent` class scope
- Eliminated code duplication and improved maintainability

## üîß Technical Changes

### iOS Native Layer
- Updated component registration in `dcf_primitive.swift`
- Removed unused component imports and references
- Improved error handling and logging across components
- Standardized component initialization patterns

### Dart Layer
- Updated component exports in `components.dart`
- Added `iconAssets` property to segmented control API
- Maintained backward compatibility for existing components
- Clean component removal without breaking changes

### Framework Integration
- All primitive components properly import `dcflight` framework
- Consistent use of shared utilities and patterns
- Improved asset resolution for better performance
- Enhanced type safety and error handling

## üêõ Bug Fixes
- Fixed modal child management during animations
- Resolved color conversion inconsistencies
- Fixed asset loading edge cases
- Improved component lifecycle management

## üîÑ Breaking Changes
- **Removed Components:**
  - `DCFSwipeableViewComponent` / `swipeable_view_component`
  - `DCFAnimatedTextComponent` / `animated_text_component`
- These components were deemed unnecessary and removed to keep the framework lean

## üìö Documentation
- Added comprehensive primitives documentation
- Updated module development guidelines
- Improved component API documentation
- Enhanced asset loading guidance

## ‚úÖ Compatibility
- **iOS:** iOS 13.5+ (unchanged)
- **Flutter:** Compatible with current Flutter stable
- **Dart:** No breaking changes to existing component APIs

## üéØ Performance Improvements
- Reduced framework size by removing unused components
- Optimized color conversion with centralized utilities
- Improved asset loading efficiency
- Better memory management in modal operations

---

**Migration Guide:**
- Remove any usage of `DCFSwipeableViewComponent` or `DCFAnimatedTextComponent`
- No other changes required for existing components
- New segmented control available with icon support

**Next Steps:**
- Refer to `/docs/primitives_docs/` for complete primitive documentation
- See `/docs/module_dev_guidelines/` for adding new primitives
